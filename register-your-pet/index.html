<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Your Pet - CheckAPet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sanchez&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Sanchez', serif;
        }

        .registration-container {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .progress-header {
            background: linear-gradient(135deg, #3c763d, #5cb85c);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .progress-bar-custom {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: white;
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 12.5%;
        }

        .step-content {
            padding: 2rem;
            min-height: 450px;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-control, .form-select {
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: #3c763d;
            box-shadow: 0 0 0 0.2rem rgba(60, 118, 61, 0.25);
        }

        .btn-primary {
            background-color: #3c763d;
            border-color: #3c763d;
            padding: 0.75rem 2rem;
            font-weight: 600;
            border-radius: 0.5rem;
        }

        .btn-primary:hover {
            background-color: #2e5b2e;
            border-color: #2e5b2e;
        }

        .btn-outline-secondary {
            border: 2px solid #6c757d;
            color: #6c757d;
            padding: 0.75rem 2rem;
            font-weight: 600;
            border-radius: 0.5rem;
        }

        .file-upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 0.5rem;
            padding: 2rem;
            text-align: center;
            transition: border-color 0.3s ease;
            cursor: pointer;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .file-upload-area:hover {
            border-color: #3c763d;
            background-color: #f8f9fa;
        }

        .file-upload-area.dragover {
            border-color: #3c763d;
            background-color: #e8f5e8;
        }

        .uploaded-images {
            margin-top: 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
        }

        .image-preview {
            position: relative;
            border-radius: 0.5rem;
            overflow: hidden;
            aspect-ratio: 1;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-remove {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            background: rgba(220, 53, 69, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.75rem;
            cursor: pointer;
        }

        .warning-box {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .success-message {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 4rem;
            color: #28a745;
            margin-bottom: 1rem;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            margin: 0 0.25rem;
            transition: background-color 0.3s ease;
        }

        .step-dot.active {
            background-color: white;
        }

        .required-field {
            color: #dc3545;
        }

        .health-item {
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .breed-suggestion {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            margin-bottom: 0.25rem;
        }

        .breed-suggestion:hover {
            background: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="registration-container">
            <!-- Progress Header -->
            <div class="progress-header">
                <h2 class="mb-0">Register Your Pet</h2>
                <p class="mb-0 mt-2">List your pet for responsible buyers</p>
                <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                </div>
                <div class="progress-bar-custom">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Step Content -->
            <div class="step-content">
                <!-- Step 1: Breeder Verification -->
                <div class="step active" id="step1">
                    <h4 class="mb-4">Breeder Information</h4>
                    <div class="warning-box">
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-info-circle text-warning me-2"></i>
                            <strong>Important: You must be the breeder of any pets you advertise</strong>
                        </div>
                        <p class="mb-0">Per our terms, all pets advertised must be bred by you. Rehoming and imported pets for sale are not permitted.</p>
                    </div>

                    <div class="mb-3">
                        <label for="breederName" class="form-label fw-semibold">Breeder Name/Kennel Name <span class="required-field">*</span></label>
                        <input type="text" class="form-control" id="breederName" required>
                    </div>

                    <div class="mb-3">
                        <label for="breederType" class="form-label fw-semibold">Breeder Type <span class="required-field">*</span></label>
                        <select class="form-select" id="breederType" required>
                            <option value="">Select breeder type</option>
                            <option value="private">Private Breeder</option>
                            <option value="licensed">Licensed Breeder</option>
                        </select>
                    </div>

                    <div class="mb-3" id="licenseSection" style="display: none;">
                        <label for="licenseNumber" class="form-label fw-semibold">License Number</label>
                        <input type="text" class="form-control" id="licenseNumber">
                        <small class="form-text text-muted">Required if you hold a breeding license</small>
                    </div>

                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="breederConfirm" required>
                        <label class="form-check-label" for="breederConfirm">
                            I confirm that I am the breeder of the pet(s) I am advertising
                        </label>
                    </div>
                </div>

                <!-- Step 2: Pet Type & Breed -->
                <div class="step" id="step2">
                    <h4 class="mb-4">Pet Information</h4>

                    <div class="mb-3">
                        <label for="petType" class="form-label fw-semibold">Pet Type <span class="required-field">*</span></label>
                        <select class="form-select" id="petType" required onchange="updateBreedOptions()">
                            <option value="">Select pet type</option>
                            <option value="dog">Dog</option>
                            <option value="cat">Cat</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="breed" class="form-label fw-semibold">Breed <span class="required-field">*</span></label>
                        <input type="text" class="form-control" id="breed" required placeholder="Type breed name...">
                        <div id="breedSuggestions" class="mt-2"></div>
                        <small class="form-text text-muted">For crossbreeds, list in mixed breed category with both parent breeds</small>
                    </div>

                    <div class="mb-3">
                        <label for="litterType" class="form-label fw-semibold">Advertisement Type <span class="required-field">*</span></label>
                        <select class="form-select" id="litterType" required onchange="updatePetFields()">
                            <option value="">Select type</option>
                            <option value="single">Single Pet</option>
                            <option value="litter">Entire Litter</option>
                        </select>
                    </div>
                </div>

                <!-- Step 3: Pet Details -->
                <div class="step" id="step3">
                    <h4 class="mb-4">Pet Details</h4>

                    <div class="mb-3">
                        <label for="petAge" class="form-label fw-semibold">Date of Birth</label>
                        <input type="date" class="form-control" id="petAge">
                        <small class="form-text text-muted">Enter the birth date of the litter</small>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="toBeConfirmed">
                        <label class="form-check-label" for="toBeConfirmed">
                            To be confirmed (litter not yet born)
                        </label>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Litter Composition</label>
                        <div class="row">
                            <div class="col-6">
                                <label for="maleCount" class="form-label">Males</label>
                                <input type="number" class="form-control" id="maleCount" min="0" placeholder="0">
                            </div>
                            <div class="col-6">
                                <label for="femaleCount" class="form-label">Females</label>
                                <input type="number" class="form-control" id="femaleCount" min="0" placeholder="0">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="petGender" class="form-label fw-semibold">Primary Gender (for single pets)</label>
                        <select class="form-select" id="petGender">
                            <option value="">Select gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="mixed">Mixed (for litters)</option>
                        </select>
                    </div>

                    <div class="warning-box">
                        <p class="mb-0"><strong>Age Requirement:</strong> The young must not be separated from their mother before 8 weeks of age as per animal welfare guidelines.</p>
                    </div>

                    <div class="mb-3">
                        <label for="petColor" class="form-label fw-semibold">Color/Markings</label>
                        <input type="text" class="form-control" id="petColor" placeholder="e.g., Golden, Black and Tan, Tabby">
                    </div>

                    <div class="mb-3">
                        <label for="microchipped" class="form-label fw-semibold">Microchipping Status <span class="required-field">*</span></label>
                        <select class="form-select" id="microchipped" required>
                            <option value="">Select status</option>
                            <option value="yes">Already microchipped</option>
                            <option value="before_collection">Will be microchipped before collection</option>
                            <option value="too_young">Too young (will be done at appropriate age)</option>
                        </select>
                        <small class="form-text text-muted">Dogs: 8 weeks, Cats: 20 weeks</small>
                    </div>
                </div>

                <!-- Step 4: Health Information -->
                <div class="step" id="step4">
                    <h4 class="mb-4">Health & Welfare</h4>
                    <p class="text-muted mb-4">All health and welfare issues must be clearly disclosed as per our terms.</p>

                    <div class="mb-3">
                        <label for="vaccinations" class="form-label fw-semibold">Vaccination Status</label>
                        <select class="form-select" id="vaccinations">
                            <option value="">Select vaccination status</option>
                            <option value="up_to_date">Up to date</option>
                            <option value="partial">Partially vaccinated</option>
                            <option value="not_vaccinated">Not yet vaccinated</option>
                            <option value="too_young">Too young for vaccinations</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="healthIssues" class="form-label fw-semibold">Health Issues or Concerns</label>
                        <textarea class="form-control" id="healthIssues" rows="3" placeholder="Please disclose any health issues, genetic conditions, or welfare concerns. Leave blank if none."></textarea>
                        <small class="form-text text-muted">Required disclosure for transparency</small>
                    </div>

                    <div class="mb-3">
                        <label for="geneticTesting" class="form-label fw-semibold">Genetic Health Testing <span class="required-field">*</span></label>
                        <select class="form-select" id="geneticTesting" required>
                            <option value="">Select testing status</option>
                            <option value="completed">Both parents fully tested for breed-specific conditions</option>
                            <option value="partial">Partial testing completed</option>
                            <option value="in_progress">Testing in progress</option>
                        </select>
                        <small class="form-text text-muted">Required: Genetic tests of dam and sire for known health issues of the breed</small>
                    </div>

                    <div class="mb-3">
                        <label for="testingDetails" class="form-label fw-semibold">Upload Health Testing Certificates <span class="required-field">*</span></label>
                        
                        <div class="file-upload-area" onclick="document.getElementById('certificateFiles').click()">
                            <i class="fas fa-file-upload fa-3x text-muted mb-3"></i>
                            <h6>Click to upload health testing certificates</h6>
                            <p class="text-muted small mb-0">PDF, JPG, PNG (Max 5MB each, up to 10 files)</p>
                            <input type="file" id="certificateFiles" multiple accept=".pdf,.jpg,.jpeg,.png" style="display: none;" required>
                        </div>

                        <div class="uploaded-images" id="uploadedCertificates"></div>
                        
                        <small class="form-text text-muted">Upload certificates for all genetic health tests performed on both parents (e.g., Hip/Elbow scoring, PRA, EIC, DM, Heart clearance)</small>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="healthDisclosure">
                        <label class="form-check-label" for="healthDisclosure">
                            I confirm all health information disclosed is accurate and complete
                        </label>
                    </div>
                </div>

                <!-- Step 5: Parents & Viewing -->
                <div class="step" id="step5">
                    <h4 class="mb-4">Parents & Viewing</h4>

                    <div class="warning-box">
                        <p class="mb-0"><strong>Viewing Requirement:</strong> Buyers must be able to see pets with their mother. Collection must be at the mother's residence.</p>
                    </div>

                    <div class="mb-3">
                        <label for="fatherVisible" class="form-label fw-semibold">Father Available for Viewing</label>
                        <select class="form-select" id="fatherVisible">
                            <option value="">Select option</option>
                            <option value="yes">Yes, father will be present</option>
                            <option value="no">No, father not available</option>
                            <option value="stud">Father is an external stud</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="puppyContract" class="form-label fw-semibold">Puppy/Kitten Contract <span class="required-field">*</span></label>
                        <select class="form-select" id="puppyContract" required>
                            <option value="">Select option</option>
                            <option value="provided">Contract will be provided to buyers</option>
                            <option value="standard">Using CheckAPet standard contract template</option>
                            <option value="custom">Custom contract prepared</option>
                        </select>
                        <small class="form-text text-muted">Required: All buyers must receive a written contract</small>
                    </div>

                    <div class="mb-3">
                        <label for="viewingNotes" class="form-label fw-semibold">Viewing Information</label>
                        <textarea class="form-control" id="viewingNotes" rows="3" placeholder="Any additional information about viewing arrangements or parent availability"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="collectionLocation" class="form-label fw-semibold">Collection Location <span class="required-field">*</span></label>
                        <input type="text" class="form-control" id="collectionLocation" required placeholder="City/Town where pet is located">
                        <small class="form-text text-muted">Pets must be collected from breeding location - no delivery/courier</small>
                    </div>
                </div>

                <!-- Step 6: Photos -->
                <div class="step" id="step6">
                    <h4 class="mb-4">Pet Photos</h4>
                    <p class="text-muted mb-4">Upload clear, recent photos of your pet(s). All photos must be authentic and of the actual pet for sale.</p>

                    <div class="warning-box mb-4">
                        <p class="mb-2"><strong>Photo Requirements:</strong></p>
                        <ul class="mb-0 small">
                            <li>Photos must be of the actual pet(s) for sale</li>
                            <li>For litters: Include photo of entire litter with mother</li>
                            <li>No copied or downloaded images from other sources</li>
                            <li>Clear, well-lit photos showing pet's condition</li>
                        </ul>
                    </div>

                    <div class="file-upload-area" onclick="document.getElementById('petPhotos').click()">
                        <i class="fas fa-camera fa-3x text-muted mb-3"></i>
                        <h6>Click to upload pet photos</h6>
                        <p class="text-muted small mb-0">JPG, PNG (Max 5MB each, up to 10 photos)</p>
                        <input type="file" id="petPhotos" multiple accept=".jpg,.jpeg,.png" style="display: none;">
                    </div>

                    <div class="uploaded-images" id="uploadedImages"></div>

                    <div class="form-check mt-4">
                        <input class="form-check-input" type="checkbox" id="photoAuthenticity" required>
                        <label class="form-check-label" for="photoAuthenticity">
                            I confirm all photos are authentic and of the actual pet(s) for sale
                        </label>
                    </div>
                </div>

                <!-- Step 7: Terms Agreement -->
                <div class="step" id="step7">
                    <h4 class="mb-4">Terms & Conditions</h4>

                    <div class="border rounded p-3 mb-4" style="max-height: 300px; overflow-y: auto;">
                        <h6>Breeder Agreement Summary:</h6>
                        <ul class="small">
                            <li>Pet must be bred by you (no rehoming or imports for sale)</li>
                            <li>Pet must not be separated from mother before 8 weeks or later</li>
                            <li>Breeder must provide genetic tests of dam and sire for known health issues of the breed</li>
                            <li>Breeder must provide puppy contract</li>
                            <li>All health issues must be disclosed</li>
                            <li>Photos must be authentic and of actual pet for sale</li>
                            <li>Buyers must collect at your premises (no delivery/courier)</li>
                            <li>Mother must be available for viewing with litter</li>
                            <li>Ensure buyers are 18+ years old</li>
                            <li>Microchipping requirements must be met</li>
                            <li>No extreme conformation breeding</li>
                            <li>Advert expires after 90 days</li>
                        </ul>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="breederTerms" required>
                        <label class="form-check-label" for="breederTerms">
                            I have read and agree to the Breeder Terms and Conditions
                        </label>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="paagStandards" required>
                        <label class="form-check-label" for="paagStandards">
                            I confirm my advert meets PAAG (Pet Advertising Advisory Group) standards
                        </label>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="buyerAge" required>
                        <label class="form-check-label" for="buyerAge">
                            I will ensure all buyers are at least 18 years old
                        </label>
                    </div>

                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="accurateInfo">
                        <label class="form-check-label" for="accurateInfo">
                            I confirm all information provided is accurate and complete
                        </label>
                    </div>
                </div>

                <!-- Success Message -->
                <div class="step" id="stepSuccess">
                    <div class="success-message">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4 class="mb-3">Pet Registration Complete!</h4>
                        <p class="text-muted mb-4">Your pet advert has been submitted for review. You'll receive an email confirmation once it's approved and live.</p>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" onclick="window.location.reload()">Register Another Pet</button>
                            <button class="btn btn-outline-secondary">View My Adverts</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="d-flex justify-content-between p-3 border-top" id="navigationButtons">
                <button class="btn btn-outline-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">
                    <i class="fas fa-arrow-left me-2"></i>Previous
                </button>
                <div></div>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                    Next<i class="fas fa-arrow-right ms-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>

let currentStep = 1;
const totalSteps = 7;
let uploadedImages = [];
let uploadedCertificates = [];

// Breed suggestions data
const breedData = {
    dog: ['Labrador Retriever', 'Labradoodle', 'Cockapoo', 'Cavapoo','Cavachon', 'Springador', 'Sprocker', 'Puggle','Golden Retriever', 'Goldendoodle', 'German Shepherd', 'Bulldog', 'Poodle', 'Beagle', 'Rottweiler', 'Yorkshire Terrier', 'French Bulldog', 'Siberian Husky', 'Border Collie', 'Australian Shepherd', 'Cocker Spaniel', 'Boxer', 'Other','Cross Breeds', 'Dachshund'],
    cat: ['British Shorthair', 'Persian', 'Maine Coon', 'Ragdoll', 'Cross Breeds', 'Siamese', 'Russian Blue', 'Bengal', 'Abyssinian', 'Norwegian Forest Cat', 'Birman', 'Oriental', 'Burmese', 'Chartreux']
};

// Photo upload functionality
const photoInput = document.getElementById('petPhotos');
const uploadArea = document.querySelector('.file-upload-area');
const uploadedImagesContainer = document.getElementById('uploadedImages');

// Certificate upload functionality
const certificateInput = document.getElementById('certificateFiles');
const certificateUploadArea = document.querySelectorAll('.file-upload-area')[1]; // Second upload area
const uploadedCertificatesContainer = document.getElementById('uploadedCertificates');

// Drag and drop for photos
uploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
});

uploadArea.addEventListener('dragleave', () => {
    uploadArea.classList.remove('dragover');
});

uploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    handleImageFiles(e.dataTransfer.files);
});

photoInput.addEventListener('change', (e) => {
    handleImageFiles(e.target.files);
});

// Certificate upload handlers
certificateUploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    certificateUploadArea.classList.add('dragover');
});

certificateUploadArea.addEventListener('dragleave', () => {
    certificateUploadArea.classList.remove('dragover');
});

certificateUploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    certificateUploadArea.classList.remove('dragover');
    handleCertificateFiles(e.dataTransfer.files);
});

certificateInput.addEventListener('change', (e) => {
    handleCertificateFiles(e.target.files);
});

function handleImageFiles(files) {
    Array.from(files).forEach(file => {
        if (file.size > 5 * 1024 * 1024) {
            alert('File size must be less than 5MB');
            return;
        }
        
        if (!['image/jpeg', 'image/jpg', 'image/png'].includes(file.type)) {
            alert('Only JPG and PNG files are allowed');
            return;
        }
        
        if (uploadedImages.length >= 10) {
            alert('Maximum 10 photos allowed');
            return;
        }
        
        uploadedImages.push(file);
        displayUploadedImage(file);
    });
}

function displayUploadedImage(file) {
    const reader = new FileReader();
    reader.onload = function(e) {
        const imageDiv = document.createElement('div');
        imageDiv.className = 'image-preview';
        imageDiv.innerHTML = `
            <img src="${e.target.result}" alt="Pet photo">
            <button type="button" class="image-remove" onclick="removeImage('${file.name}')">
                <i class="fas fa-times"></i>
            </button>
        `;
        uploadedImagesContainer.appendChild(imageDiv);
    };
    reader.readAsDataURL(file);
}

function removeImage(fileName) {
    uploadedImages = uploadedImages.filter(file => file.name !== fileName);
    updateUploadedImagesDisplay();
}

function updateUploadedImagesDisplay() {
    uploadedImagesContainer.innerHTML = '';
    uploadedImages.forEach(file => displayUploadedImage(file));
}

// Certificate handling functions
function handleCertificateFiles(files) {
    Array.from(files).forEach(file => {
        if (file.size > 5 * 1024 * 1024) {
            alert('File size must be less than 5MB');
            return;
        }
        
        if (!['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'].includes(file.type)) {
            alert('Only PDF, JPG and PNG files are allowed');
            return;
        }
        
        if (uploadedCertificates.length >= 10) {
            alert('Maximum 10 certificates allowed');
            return;
        }
        
        uploadedCertificates.push(file);
        displayUploadedCertificate(file);
    });
}

function displayUploadedCertificate(file) {
    const fileDiv = document.createElement('div');
    fileDiv.className = 'image-preview';
    
    // Show different icon for PDF vs images
    const isPDF = file.type === 'application/pdf';
    if (isPDF) {
        fileDiv.innerHTML = `
            <div style="background: #f8f9fa; display: flex; align-items: center; justify-content: center; height: 100%; border-radius: 0.5rem;">
                <i class="fas fa-file-pdf fa-2x text-danger"></i>
            </div>
            <button type="button" class="image-remove" onclick="removeCertificate('${file.name}')">
                <i class="fas fa-times"></i>
            </button>
        `;
    } else {
        const reader = new FileReader();
        reader.onload = function(e) {
            fileDiv.innerHTML = `
                <img src="${e.target.result}" alt="Certificate">
                <button type="button" class="image-remove" onclick="removeCertificate('${file.name}')">
                    <i class="fas fa-times"></i>
                </button>
            `;
        };
        reader.readAsDataURL(file);
    }
    
    uploadedCertificatesContainer.appendChild(fileDiv);
}

function removeCertificate(fileName) {
    uploadedCertificates = uploadedCertificates.filter(file => file.name !== fileName);
    updateUploadedCertificatesDisplay();
}

function updateUploadedCertificatesDisplay() {
    uploadedCertificatesContainer.innerHTML = '';
    uploadedCertificates.forEach(file => displayUploadedCertificate(file));
}

// Update breed suggestions based on pet type
function updateBreedOptions() {
    const petType = document.getElementById('petType').value;
    const breedInput = document.getElementById('breed');
    const suggestionsDiv = document.getElementById('breedSuggestions');
    
    if (petType && breedData[petType]) {
        breedInput.placeholder = `Type ${petType} breed name...`;
        suggestionsDiv.innerHTML = '';
    }
}

// Show breed suggestions
document.getElementById('breed').addEventListener('input', function() {
    const petType = document.getElementById('petType').value;
    const input = this.value.toLowerCase();
    const suggestionsDiv = document.getElementById('breedSuggestions');
    
    if (petType && breedData[petType] && input.length > 0) {
        const matches = breedData[petType].filter(breed => 
            breed.toLowerCase().includes(input)
        ).slice(0, 5);
        
        suggestionsDiv.innerHTML = matches.map(breed => 
            `<div class="breed-suggestion" onclick="selectBreed('${breed}')">${breed}</div>`
        ).join('');
    } else {
        suggestionsDiv.innerHTML = '';
    }
});

function selectBreed(breed) {
    document.getElementById('breed').value = breed;
    document.getElementById('breedSuggestions').innerHTML = '';
}

// Show/hide license section based on breeder type
document.getElementById('breederType').addEventListener('change', function() {
    const licenseSection = document.getElementById('licenseSection');
    const licenseInput = document.getElementById('licenseNumber');
    
    if (this.value === 'licensed') {
        licenseSection.style.display = 'block';
        licenseInput.required = true;
    } else {
        licenseSection.style.display = 'none';
        licenseInput.required = false;
        licenseInput.value = '';
    }
});

// Update pet fields based on litter type
function updatePetFields() {
    // This function can be simplified or removed since we no longer have litterSizeSection
    // Keeping it for now in case future functionality is needed
}

function validateStep(step) {
    const stepElement = document.getElementById(`step${step}`);
    const requiredFields = stepElement.querySelectorAll('[required]');
    let isValid = true;
    
    // Clear previous validation states
    requiredFields.forEach(field => {
        field.classList.remove('is-invalid');
    });
    
    // Validate required fields
    requiredFields.forEach(field => {
        if (field.type === 'checkbox') {
            if (!field.checked) {
                field.classList.add('is-invalid');
                isValid = false;
            }
        } else if (!field.value.trim()) {
            field.classList.add('is-invalid');
            isValid = false;
        }
    });
    
    return isValid;
}

function nextStep() {
    if (currentStep <= totalSteps && validateStep(currentStep)) {
        if (currentStep === totalSteps) {
            completeRegistration();
            return;
        }
        
        document.getElementById(`step${currentStep}`).classList.remove('active');
        currentStep++;
        document.getElementById(`step${currentStep}`).classList.add('active');
        updateProgress();
        updateButtons();
        updateStepIndicators();
    }
}

function previousStep() {
    if (currentStep > 1) {
        document.getElementById(`step${currentStep}`).classList.remove('active');
        currentStep--;
        document.getElementById(`step${currentStep}`).classList.add('active');
        updateProgress();
        updateButtons();
        updateStepIndicators();
    }
}

function updateProgress() {
    const progress = (currentStep / totalSteps) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
}

function updateButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
    
    if (currentStep === totalSteps) {
        nextBtn.innerHTML = 'Complete Registration <i class="fas fa-check ms-2"></i>';
    } else {
        nextBtn.innerHTML = 'Next <i class="fas fa-arrow-right ms-2"></i>';
    }
}

function updateStepIndicators() {
    const dots = document.querySelectorAll('.step-dot');
    dots.forEach((dot, index) => {
        if (index < currentStep) {
            dot.classList.add('active');
        } else {
            dot.classList.remove('active');
        }
    });
}

function completeRegistration() {
    const formData = {
        breederInfo: {
            name: document.getElementById('breederName').value,
            type: document.getElementById('breederType').value,
            license: document.getElementById('licenseNumber').value
        },
        petInfo: {
            type: document.getElementById('petType').value,
            breed: document.getElementById('breed').value,
            litterType: document.getElementById('litterType').value
        },
        petDetails: {
            dateOfBirth: document.getElementById('petAge').value, // Now a date field
            toBeConfirmed: document.getElementById('toBeConfirmed').checked,
            age: document.getElementById('petAge').value, // Keep for compatibility
            gender: document.getElementById('petGender').value,
            maleCount: document.getElementById('maleCount').value,
            femaleCount: document.getElementById('femaleCount').value,
            color: document.getElementById('petColor').value,
            microchipped: document.getElementById('microchipped').value
        },
        health: {
            vaccinations: document.getElementById('vaccinations').value,
            issues: document.getElementById('healthIssues').value,
            geneticTesting: document.getElementById('geneticTesting').value,
            certificates: uploadedCertificates.map(f => f.name)
        },
        viewing: {
            fatherVisible: document.getElementById('fatherVisible').value,
            puppyContract: document.getElementById('puppyContract').value,
            viewingNotes: document.getElementById('viewingNotes').value,
            collectionLocation: document.getElementById('collectionLocation').value
        },
        photos: uploadedImages.map(f => f.name),
        agreements: {
            breederTerms: document.getElementById('breederTerms').checked,
            paagStandards: document.getElementById('paagStandards').checked,
            buyerAge: document.getElementById('buyerAge').checked,
            accurateInfo: document.getElementById('accurateInfo').checked
        }
    };
    
    // Store in sessionStorage for demo purposes
    sessionStorage.setItem('checkaPetBreederRegistration', JSON.stringify(formData));
    
    // Show success
    document.getElementById(`step${currentStep}`).classList.remove('active');
    document.getElementById('stepSuccess').classList.add('active');
    document.getElementById('navigationButtons').style.display = 'none';
    updateProgress();
    
    console.log('Breeder registration completed:', formData);
}

// Initialize when page loads
updateProgress();
updateButtons();

</script>

</body>
</html>
